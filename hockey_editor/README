Подробности перетаскивания маркеров
Автоопределение событий ИИ
Улучшить код экспорта


Ты — эксперт по разработке профессионального десктопного ПО для спортивного видеоанализа (аналог Hudl Sportscode, LongoMatch, Kinovea).

Создай подробное техническое задание и/или прототип интерфейса приложения со следующими ключевыми функциями:

Основной интерфейс
- Центральная область — большой встроенный видеоплеер.
- Кнопка «Отдельное окно» — выносит видео в отдельное независимое полноэкранное окно.
- Под видеоплеером — главный таймлайн с маркерами и отрезками событий.
- Таймлайн масштабируется только по времени (растягивается/сжимается горизонтально) с помощью Ctrl + колесо мыши или pinch-жеста. Масштаб общий для всех строк событий.
- Под главным таймлайном — несколько строк событий (как в Sportscode): каждая строка — отдельная категория/тип события, цветные отрезки и маркеры.
- Справа от видео — вертикальная панель «Список событий» (хронологический список всех созданных отрезков с превью, названием, временем, длительностью). Клик по событию — переход видео на начало отрезка без остановки воспроизведения.

Два режима создания отрезков (переключаются в настройках)
Режим 1 — «Ручной» (по умолчанию):
   • Нажатие одной горячей клавиши или кнопки «Старт/Стоп» — фиксирует начало отрезка.
   • Повторное нажатие той же клавиши — фиксирует конец отрезка.
   • Видео при этом продолжает воспроизводиться.

Режим 2 — «Фиксированная длительность»:
   • Нажатие клавиши или кнопки мгновенно создаёт отрезок с заранее заданной длительностью (например, 5, 8, 10, 15 сек — настраивается).
   • Начало отрезка — текущий момент воспроизведения.
   • При создании сразу открывается окно выбора типа события и названия.

Дополнительные параметры создания отрезков
- Pre-roll (откат назад от начала события): 0–15 сек, настраивается с шагом 0.1 сек.
- Post-roll (добивка после конца события) — опционально.
- Все настройки создания отрезков (выбор режима, фиксированная длительность, pre-roll, горячие клавиши и т.д.) собраны в отдельном окне «Настройки управления», которое вызывается правым кликом по таймлайну → «Настройки управления» или из главного меню.

Редактирование отрезков
- Клик по отрезку на таймлайне — выделение, можно перетаскивать края мышью.???
- Двойной клик по отрезку на таймлайне или в списке событий — открывает точное редактирование времени (ввод вручную, кнопки ±1 кадр / ±0.1 сек).
- Правый клик по отрезку — контекстное меню (удалить, изменить тип, изменить цвет и т.д.).

Дополнительные функции
- Масштабирование таймлайна — Ctrl + колесо мыши на месте самого таймлайна.
- Режим рисования (телестрация) в панели списка событий при просмотре конкретного отрезка (стрелки, круги, линии, текст) — сохраняется вместе с событием.
- Экспорт списка событий в CSV/XML/Excel и экспорт проекта.

Технические требования
- Десктопное кроссплатформенное приложение (Windows + macOS).
- Поддержка 4K 50/60 fps без лагов.
- Никакого URL-encoding и HTML-энтитей в названиях событий, комментариях и тегах — текст сохраняется и отображается «как есть».
- Рекомендуемый стек: Python + PyQt/PySide.
- Для видео — mpv, libvlc или Web-based video с hardware acceleration.