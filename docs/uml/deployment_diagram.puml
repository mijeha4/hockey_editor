@startuml Deployment Diagram
!theme plain
title Диаграмма развертывания: Hockey Editor Pro Desktop Application

' ================== РАБОЧАЯ СТАНЦИЯ ==================
node "Рабочая станция пользователя\n(Windows/Linux/macOS)" as Workstation {
    
    node "Приложение Hockey Editor Pro" as App {
        component [MainWindow] as MW
        component [VideoController] as VC
        component [VideoProcessor] as VP
        component [ProjectManager] as PM
        component [SettingsManager] as SM
        component [UndoRedoManager] as URM

        MW --> VC : управление
        VC --> VP : видео ввод/вывод
        VC --> PM : работа с проектом
        VC --> SM : конфигурация
        VC --> URM : история команд
    }

    database "Локальное хранилище" as Storage {
        folder "Файлы проектов (.hep)" as Projects
        file "Настройки (QSettings)" as Settings
        folder "Автосохранение" as Recovery
        folder "Недавние проекты" as Recent
    }

    App --> Storage : сохраняет данные
}

' ================== ВНЕШНИЕ ЗАВИСИМОСТИ ==================
node "Внешние зависимости\n(Библиотеки и API)" as External {

    interface "PySide6" as PySide6
    interface "OpenCV" as OpenCV
    interface "FFmpeg" as FFmpeg
    interface "moviepy" as MoviePy

    note right of PySide6
      **PySide6 (Qt for Python):**
      • Графический каркас и виджеты
      • Событийно-ориентированное ПО
      • Кроссплатформенность
      • Нативная интеграция с ОС
    end note

    note right of OpenCV
      **OpenCV (Computer Vision):**
      • Чтение и декодирование видео
      • Извлечение кадров и навигация
      • Обработка видео в реальном времени
      • Поддержка множества форматов
    end note

    note right of FFmpeg
      **FFmpeg (Multimedia Framework):**
      • Кодирование/декодирование
      • Конвертация форматов
      • Библиотеки кодеков
      • Обработка потоков
    end note

    note right of MoviePy
      **moviepy (Video Editing):**
      • Высокоуровневый монтаж
      • Склейка клипов (Concatenation)
      • Эффекты и переходы
      • Экспорт в разные форматы
    end note
}

' ================== СВЯЗИ РАЗВЕРТЫВАНИЯ ==================
App ..> PySide6 : <<использует>>
App ..> OpenCV : <<использует>>
App ..> FFmpeg : <<использует>>
App ..> MoviePy : <<использует>>

' ================== ПОТОКИ ДАННЫХ ==================
VP <-- "Видео файлы\n(.mp4, .avi, .mov, .mkv)" : чтение
PM --> Projects : сохранение/загрузка
SM --> Settings : запись настроек
URM --> Recovery : резервное копирование

' ================== АРТЕФАКТЫ ==================
artifact "Исходные видео" as VideoFiles {
    file "*.mp4" as MP4
    file "*.avi" as AVI
    file "*.mov" as MOV
    file "*.mkv" as MKV
}

artifact "Форматы экспорта" as ExportFormats {
    file "*.mp4" as ExportMP4
    file "*.mov" as ExportMOV
}

App <-- VideoFiles : входные данные
App --> ExportFormats : генерация выходных файлов

' ================== ОБЩИЕ ЗАМЕТКИ ==================
note as N1
  **Среда развертывания:**
  • **Целевые платформы**: Windows 10+, Linux (Ubuntu 18.04+), macOS 10.14+
  • **Версия Python**: 3.8+
  • **Установка**: Standalone executable или pip install
  • **Зависимости**: Все внешние библиотеки упакованы или ставятся через pip
end note

note as N2
  **Системные требования (Runtime):**
  • **ОЗУ**: Минимум 4GB, Рекомендуется 8GB+
  • **Диск**: 500MB приложение + место под проекты
  • **Экран**: Минимум 1920x1080
  • **GPU**: Опционально, для аппаратного ускорения декодирования
end note

note as N3
  **Распределение компонентов:**
  • **Ядро приложения**: Единый исполняемый файл со встроенным Python
  • **Внешние библиотеки**: Либо встроены (bundled), либо системные
  • **Данные пользователя**: Хранятся в домашней директории или AppData
  • **Временные файлы**: Создаются в системной temp папке при экспорте
end note

@enduml